<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../styles/product.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
    integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js" integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM=" crossorigin=""></script>
    <script src="../functions/search.js"></script>
    <title>Ulun.mn</title>
  </head>
  <body>
    <div class="container">
      <div class="head">
        <div class="head-container">
          <a style="color:black;text-decoration: none; "href="../index.html">

            <h1 >Ulun.mn</h1>
          </a>

          <div>
            <form style="display: flex; flex-direction: row;" id="search-form">
              <select name="search-type" id="search-type" class="search-dropdown">
                <option value="price" selected>Price Range</option>
                <option value="name">Name</option>
              </select>
              <div style="width: 16px"></div>
              <input type="text" placeholder="Search by name" id="name-search" class="search-name">
              <div style="display: flex; flex-direction: row;">
                <input type="number" placeholder="Min price" id="min-price" class="search-price">
                <div style="width: 28px; display: flex; justify-content: center; align-items: center; font-weight: 900;">-</div>
                <input type="number" placeholder="Max price" id="max-price" class="search-price">
              </div>
              
              <button type="submit" class="search-button" onclick="doSearch()">Search</button>
            </form>
          
          </div>
          <!-- <input type="text" class="search" placeholder="Үнэ..."> -->
          <div style="display: flex; flex-direction: row;">

            <a href="./login.html">
              <div class="user"></div>
            </a>
            <div style="width: 16px;"></div>
            <a href="./createProduct.html" style="text-decoration: none;">
              <div class="createProduct">
                <p>+</p>
              </div>
            </a>
          </div>
        </div>
      </div>
      <div class="body">
        <div class="product-container">
          <img src="../images/buuz.png" class="image" />
          <div style="width: 56px"></div>
          <div class="description">
            <p style="font-size: 32px">Хөвсгөр бууз</p>
            <p style="font-size: 24px; font-weight: 700; color: #d22501;">1800₮</p>
            <p style="font-size: 20px; opacity: 70%;">CU - Zaisan Hill</p>
            <p></p>
            <p></p>
            <div>
              <p>Үнэлгээ - 3.4 <span style="color: rgba(0, 0, 0, 0.4);">(21)</span></p>
              <div>
                <i data-star="3.4"></i>
              </div>
          </div>
          </div>
        </div>
        <div style="height: 48px;"></div>
        <div>
          <p style="font-size: 18px;">Байршил - Khan-Uul District, 11th khoroo, Zaisan Hill, 1 давхар</p>
          <div style="height: 16px"></div>
          <div id="map"></div>
        </div>
        
      </div>
    </div>


    <style>
      #map { 
        height: 400px;
        width: 700px;
        border-width: 2px;
      }
    </style>
    <script>
const searchForm = document.querySelector("#search-form")
searchForm.addEventListener('submit', (event) => {
  event.preventDefault(); // prevent default form submission behavior
  // your form submission code here
});
      // Get the dropdown and search bar elements
const searchTypeDropdown = document.getElementById('search-type');
const nameSearch = document.getElementById('name-search');
const minPrice = document.getElementById('min-price');
const maxPrice = document.getElementById('max-price');

window.onload = function() {
  nameSearch.style.display = 'none';
    minPrice.style.display = 'block';
    maxPrice.style.display = 'block';

}

searchTypeDropdown.addEventListener('change', (event) => {
  if (event.target.value === 'name') {
    nameSearch.style.display = 'block';
    minPrice.style.display = 'none';
    maxPrice.style.display = 'none';
  } else if (event.target.value === 'price') {
    nameSearch.style.display = 'none';
    minPrice.style.display = 'block';
    maxPrice.style.display = 'block';
  }
});

function doSearch() {
  const minPrice = document.getElementById('min-price').value;
  const maxPrice = document.getElementById('max-price').value;

  searchByPrice(minPrice, maxPrice)

}


    </script>
    <script>
      var coordinates = [47.8857624, 106.915607]
      var place =  "Khan-Uul District, 11th khoroo, Zaisan Hill, 1 давхар"
      
      var map = L.map('map').setView(coordinates, 16);

        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
          maxZoom: 19,
          attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        }).addTo(map);

        var marker = L.marker(coordinates).addTo(map);

        marker.bindPopup(place).openPopup();

        var popup = L.popup();
    </script>


  </body>
</html>
